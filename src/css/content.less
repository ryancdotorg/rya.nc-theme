// SPDX-License-Identifier: GPL-3.0-or-later
// Theme Name: rya.nc
// Theme URI: https://github.com/ryancdotorg/rya.nc-theme
// Description: A Pelican theme originally based on ‘The Open Sourcerer’ by Alan Lord.
// Author: Ryan Castellucci code@ryanc.org
// Author URI: https://rya.nc/
// Copyright (c) 2023 Ryan Castellucci

@import (once) "define.less";

//.css-warning {
//  display:none;
//  height:1px;
//  width:1px;
//  position:absolute;
//  overflow:hidden;
//  top:-10px;
//}

// .redacted { background-color: currentColor; }
// .sarcasm { transform: skewX(10deg); display: inline-block; }

/* expand abbreviations on devices without good pointers */
@media not all and (any-pointer: fine), (any-hover: none), print {
    span.abbr::before { content: attr(data-title) " ("; }
    span.abbr::after { content: ")"; }
}

time, abbr {
    text-decoration: underline dotted;
    cursor: default;
}

.postmeta a[href^="/tag/"]::before { content: "#"; }

.section {
    scroll-margin-top: (@menu-size + @h2-size * @vpad-size);
}

.section > .section {
    scroll-margin-top: (@menu-size + @h3-size * @vpad-size);
}

.section > .section > .section {
    scroll-margin-top: (@menu-size + @h4-size * @vpad-size);
}

.section > :first-child > a[rel=bookmark] {
    color: inherit;
    text-decoration: none;

    &::after {
        content: "\0000A0#";
        opacity: 50%;
    }

//    &::after {
//        content: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-158 0 512 512'%3e%3cpath fill='%23d9d9d9' d='m140 435-31 31a44 44 0 0 1-62-63l80-80a44 44 0 0 1 60-2l3 2a18 18 0 0 0 24-26l-3-3a79 79 0 0 0-108 4l-82 80a80 80 0 0 0 113 113 l31-30a18 18 0 0 0-25-26m190-253a80 80 0 0 0-112 0l-31 30a18 18 0 0 0 24 26l31-31a44 44 0 0 1 62 62l-80 81a44 44 0 0 1-61 2l-2-2a18 18 0 1 0 -25 26l4 3a79 79 0 0 0 109-4l81-80a80 80 0 0 0 0-113m0 0'/%3e%3c/svg%3e");
//        background-repeat: no-repeat;
//        display: inline-block;
//        width: 1em;
//        height: auto;
//    }
}

span:target {
    scroll-margin-top: (@menu-size + @vpad-size);
    background-color:@highlight;
    margin:0 -2px;
    border:solid 2px @highlight;
    -webkit-box-decoration-break:clone;
    box-decoration-break:clone;
}

.article hr {
    border:solid @theme-border;
    border-width:1px 0 0;
}

.article, .archive, #pagination {
    background-color:@theme-bg2;
    border:solid 1px @theme-border;

    hyphens: auto;

    line-height:1.3;
    margin-bottom:1.5em;
//    margin-right: 239px;
}

.article div > p, .archive div > p {
    margin-bottom:1em;
    margin-top:1em;
}

.article li p:first-child {
    margin-top:0;
}

.article li p:last-child {
    margin-bottom:0;
}

.article li + li {
    margin-top:0.2em;
}

.article h1 {
    padding:@vpad-size 0 1em 0;
    border-bottom:solid 1px @theme-border;
    font-size:@h1-size;
    font-weight:normal;
    line-height:1.3;
}

.article h2 { font-size:@h2-size; }
.article h3 { font-size:@h3-size; }
.article h4 { font-size:@h4-size; }

.archive .inside + .inside {
    border-top:solid 1px @theme-border;
}

.archive .postmeta {
    padding-top:0;
}

.article ol, .article ul {
    margin-left:1.4em;
    margin-bottom:1em;
}

footer, #pagination, .postmeta {
    font-size:0.9em;
}

/* The Article's meta data */
.postmeta {
    color:@theme-meta;
    margin:2.2222em 0 .5em;
}

.call-to-action {
    margin:2em 0 2em;
}

.article blockquote {
    margin:0 1em;
    padding:1em;
    font-style:italic;
    font-synthesis:none;
    background-color:@theme-bg1;
    border:solid 1px @theme-border;
}

/* make sure blockquotes look right whether or not they've got nested p tags */
blockquote > p { margin:0; }
blockquote > p + p { margin-top:1em; }

.breakall {
    word-break:break-all !important;
}

.article td, .article table>caption {
    padding:0.3em;
    border:solid 1px @theme-border;
}

.article table>caption {
    text-align:center;
    font-weight:700;
    background-color:@theme-border;
}

.article td {
    background-color:@theme-bg1;
}

.article table.footnote td {
    background-color:inherit;
    border:0;
    font-size:smaller;
}

.article table.footnote td.label { padding-left:0; }

/* docutils crap */
img.align-center {
    display: block;
    margin-right: auto;
    margin-left: auto;
}

/* subscript/superscript tweak to avoid preturbing lines */
/* https://gist.github.com/unruthless/413930 */
sub, sup, a.footnote-reference {
    font-size: 70%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
    font-style: normal;
}
sup, a.footnote-reference { top: -0.4em; }
sub { bottom: -0.3em; }

a.footnote-reference + a {
    position: relative;
    top: -3.5em;
}

/* other footnote stuff */
table.footnote {
    width:100%;
    border-collapse:separate;
    border-spacing:0;
    border-top:solid 1px @theme-border;
    padding-top:@vpad-size;
    margin-bottom:0;
    scroll-margin-top: (@menu-size);
}

table.footnote ~ table.footnote {
    border-top:0;
    padding-top:inherit;
}

table.footnote .label {
    vertical-align: top;
    width:1px; /* minimum width */
    white-space:nowrap;
}

table.footnote:target td + td {
    background-color:@theme-bg1;
    outline: solid 1px @theme-border;
}

summary { cursor: pointer; }

/* Form Styling */

/* Style input boxes and buttons */
//input, textarea, select {
//    background-color:@theme-fg1;
//    border-color:#BFBFBF; /* C1D7A6 */
//    border-width:2px;
//    color:@theme-bg2;
//}

//fieldset {
//    padding:0.5em;
//    border-color:#BFBFBF;
//    border-width:2px; /* C1D7A6 */
//}
